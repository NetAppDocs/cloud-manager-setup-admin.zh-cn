<!DOCTYPE html>
<html lang="zh-cn">
  <head class="at-element-marker">
  <title>管理 Cloud Manager 的 Azure 凭据和订阅 | NetApp Documentation</title>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge,chrome=1">
  <meta http-equiv="language" content="en">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="og:title" content="管理 Cloud Manager 的 Azure 凭据和订阅 | NetApp Documentation" />
	<meta property="og:type" content="website" />
	<meta property="og:url" content="https://docs.netapp.com/zh-cn/cloud-manager-setup-admin/task-adding-azure-accounts.html" />
	<meta property="og:description" content="创建 Cloud Volumes ONTAP 系统时，您需要选择要用于该系统的 Azure 凭据和 Marketplace 订阅。如果您管理多个 Azure Marketplace 订阅，则可以从 " 凭据 " 页面将其中每个订阅分配给不同的 Azure 凭据。" />
  <meta property="og:image" content="https://docs.netapp.com/zh-cn/cloud-manager-setup-admin/images/logo-tophat-social.png" />
  <meta property="og:image:alt" content="NetApp Logo" />
  <meta name="format-detection" content="telephone=no">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="encoding" content="utf-8">
  <meta http-equiv="nss-type" content="Product Documentation"/>
  <meta http-equiv="nss-subtype" content="User Guide"/><meta name="description" content="创建 Cloud Volumes ONTAP 系统时，您需要选择要用于该系统的 Azure 凭据和 Marketplace 订阅。如果您管理多个 Azure Marketplace 订阅，则可以从 " 凭据 " 页面将其中每个订阅分配给不同的 Azure 凭据。">
  <meta name="keywords" content=" permissions, microsoft, azure, permissions, custom role, role, json, active directory, ad, service principal, key, tenant id, application key, application id, operator role, managed identity, iam, operator, role, virtual machine, create custom role, create azure custom role, azure custom role"><!-- Icons -->
  <link rel="icon" href="/zh-cn/cloud-manager-setup-admin/images/favicon.ico" type="image/x-icon">

  <!-- RSS Feed --><link rel="alternate" type="application/rss+xml" title="NetApp Documentation" href="/zh-cn/cloud-manager-setup-admin/feed.xml"><!-- CSS Definitions: NetApp CSS should be defined after generic css -->

  <!-- Elastic Search -->
  <link rel="stylesheet" href="//cdn.jsdelivr.net/searchkit/0.10.0/theme.css">

  <!-- Controls AsciiDoctor Admonition Blocks -->
  <link rel="stylesheet" type="text/css" href="/zh-cn/cloud-manager-setup-admin/css/font-awesome.min.css">

  <!-- Controls the shadow effect for search dropdown menu -->
  <link rel="stylesheet" href="/zh-cn/cloud-manager-setup-admin/css/boxshadowproperties.css">

  <!-- NetApp CSS controls the technical content -->
  <link rel="stylesheet" type="text/css" href="/zh-cn/cloud-manager-setup-admin/css/netapp.css">

  <!-- WWW CSS Content -->
  <link rel="stylesheet" type="text/css" href="/zh-cn/cloud-manager-setup-admin/css/www-luci-dotcom.min.css">
  <link rel="stylesheet" type="text/css" href="/zh-cn/cloud-manager-setup-admin/css/www-netapp-dotcom.css">
  <link rel="stylesheet" href="/zh-cn/cloud-manager-setup-admin/css/www-netapp-library-critical.min.css" media="all" >
  <link rel="stylesheet" href="/zh-cn/cloud-manager-setup-admin/css/www-netapp-library-non-critical.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="stylesheet" href="/zh-cn/cloud-manager-setup-admin/css/www-netapp-library-global-header-footer.min.css">

  <!-- NetApp IE Customizations -->
  <link rel="stylesheet" href='/zh-cn/cloud-manager-setup-admin/css/na-utility.css' type='text/css'>
  <link rel="stylesheet" href='/zh-cn/cloud-manager-setup-admin/css/na-sidebar.css' type='text/css'>
  <link rel='stylesheet' href='/zh-cn/cloud-manager-setup-admin/css/clouddocs.css' type='text/css'>
  <link rel='stylesheet' href='/zh-cn/cloud-manager-setup-admin/css/custom-dropdown.css' type='text/css'>
  <link rel='stylesheet' href='/zh-cn/cloud-manager-setup-admin/css/na-pagenav.css' type='text/css'>

  
  <link rel="stylesheet" href="/zh-cn/cloud-manager-setup-admin/css/landing-page.css" type="text/css">
  <link rel="stylesheet" href="/zh-cn/cloud-manager-setup-admin/css/tabbed-blocks.css" type="text/css">
  <!-- Canonical url -->
  <link rel='stylesheet' href='/zh-cn/cloud-manager-setup-admin/css/na-feature.css' type='text/css'><!-- Top level site integrations --><script>
    if (document.location.hostname === "docs.netapp.com") {
      var head = document.getElementsByTagName('head')[0];
      var onetrustConsent = document.createElement("script");
      onetrustConsent.type = "text/javascript";
      onetrustConsent.src = "https://cdn.cookielaw.org/consent/72570c5c-fe30-465f-b0e0-b77f7fb4ae34/OtAutoBlock.js";
      head.appendChild(onetrustConsent);

      var onetrustScript = document.createElement("script");
      onetrustScript.type = "text/javascript";
      onetrustScript.src = "https://cdn.cookielaw.org/scripttemplates/otSDKStub.js";
      onetrustScript.charset = "UTF-8";
      onetrustScript.dataset.documentLanguage = "true";
      onetrustScript.dataset.domainScript = "72570c5c-fe30-465f-b0e0-b77f7fb4ae34";
      head.appendChild(onetrustScript);
    }

    function OptanonWrapper() { }

    if (document.location.hostname === "docs.netapp.com") {
      var adobe = document.createElement("script");
      adobe.type = "text/plain";
      adobe.className = "optanon-category-C0002";
      adobe.src = "//assets.adobedtm.com/60287eadf1ee/c284da483c83/launch-e9ff3acac59f.min.js";
      head.appendChild(adobe);

      var google = document.createElement("script");
      google.type = "text/plain";
      google.className = "optanon-category-C0002";
      google.src = "https://www.googletagmanager.com/gtag/js?id=UA-81697994-3";
      head.appendChild(google);

      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-81697994-3');
    }
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>

  <!-- Used for Product Family Page Sidebar Visibility --><!-- Used to import Promise for IE. Required for SearchKit -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bluebird/3.3.5/bluebird.min.js"></script><script src='/zh-cn/cloud-manager-setup-admin/js/na-search.js'></script><script src='/zh-cn/cloud-manager-setup-admin/js/na-pagenav.js'></script><link rel='stylesheet' href='/zh-cn/cloud-manager-setup-admin/css/prism.css' type='text/css'>
  <link rel='stylesheet' href='/zh-cn/cloud-manager-setup-admin/css/prism-netapp.css' type='text/css'>


  <script src='/zh-cn/cloud-manager-setup-admin/js/na-utility.js'></script>
  <script src='/zh-cn/cloud-manager-setup-admin/js/clouddocs.js'></script>
  <script src='/zh-cn/cloud-manager-setup-admin/js/jquery.navgoco.min.js'></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  <script src='/zh-cn/cloud-manager-setup-admin/js/toc.js'></script>
  <script src='/zh-cn/cloud-manager-setup-admin/js/customscripts.js'></script><script>
      $(document).ready(function() {
          
          var collapseOnInit = true;
          

          var navSettings = {
              "caretHtml": '',
              "accordion": collapseOnInit,
              "openClass": 'active', // open
              "save": false, // leave false or nav highlighting doesn't work right
              "cookie": {
                  "name": 'navgoco',
                  "expires": false,
                  "path": '/'
              },
              "slide": {
                  "duration": 400,
                  "easing": 'swing'
              }
          };

          // Initialize navgoco with default options
          $("#mysidebar").navgoco(navSettings);
          

          $("#collapseAll").click(function(e) {
              e.preventDefault();
              $("#mysidebar").navgoco('toggle', false);
          });

          $("#expandAll").click(function(e) {
              e.preventDefault();
              $("#mysidebar").navgoco('toggle', true);
          });

      });

  </script>
  <script>
      $(document).ready(function() {
          $("#tg-sb-link").click(function() {
              $("#tg-sb-sidebar").toggle();
              $("#tg-sb-content").toggleClass('col-md-9');
              $("#tg-sb-content").toggleClass('col-md-12');
              $("#tg-sb-icon").toggleClass('fa-toggle-on');
              $("#tg-sb-icon").toggleClass('fa-toggle-off');
          });
      });
  </script>
  <script src='/zh-cn/cloud-manager-setup-admin/js/custom-dropdown.js'></script>
  <script src='/zh-cn/cloud-manager-setup-admin/js/FileSaver.min.js'></script>
  <script src='/zh-cn/cloud-manager-setup-admin/js/jszip-utils.min.js'></script>
  <script src='/zh-cn/cloud-manager-setup-admin/js/jszip.min.js'></script>
  <script src='/zh-cn/cloud-manager-setup-admin/js/pdf-ux.js'></script>
</head>


  <body class role="document" data-flavor="">
    <div id="page" class="n-off-canvas-menu">
      <div class="n-off-canvas-menu__menu"><!--TODO: Add offcanvas code --></div>
      <div class="n-off-canvas-menu__content-wrap">
        <header class="site-header" id="banner">
  
  <!-- Start Page Toolbar -->
  
  <div class="page-nav-toolbar"><div class="page-nav-contribute"><a target="_blank" href="https://github.com/NetAppDocs/cloud-manager-setup-admin/issues/new?body=Page%3A%20[管理 Cloud Manager 的 Azure 凭据和订阅](https://docs.netapp.com/zh-cn/cloud-manager-setup-admin/task-adding-azure-accounts.html)" class="page-nav-contribute-link" role="button"><img src="/zh-cn/cloud-manager-setup-admin/images/discuss-sm.svg" class="github-icon" />请求文档变更</a><a target="_blank" href="https://github.com/NetAppDocs/cloud-manager-setup-admin/blob/main/task-adding-azure-accounts.adoc" class="page-nav-contribute-link" role="button"><img src="/zh-cn/cloud-manager-setup-admin/images/edit-sm.svg" class="github-icon" />在 GitHub 上编辑</a><a target="_blank" href="https://docs.netapp.com/us-en/contribute/" class="page-nav-contribute-link"  ><img src="/zh-cn/cloud-manager-setup-admin/images/article-sm.svg" class="github-icon" />提供者指南</a></div>
    <div class="page-nav-container">
      <nav class="page-nav-fixed">
        <div class="page-nav-title">在此页面上</div>
        <div class="page-nav-links">
          <ul class="page-nav-inner" id="page-menu"></ul>
        </div>
      </nav>
    </div>
  </div>
  
  
  <!-- Start top_hat -->
  <div class="n-top-hat">
    <div class="n-container">
      <div class="n-top-hat__cross-property-nav">
        <ul class="n-top-hat__list">
          <li class="n-top-hat__list-item">
            <a href="https://www.netapp.com/products-a-z/" class="n-top-hat__link">产品和解决方案</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://www.netapp.com/support-and-training/netapp-university/" class="n-top-hat__link">支持和培训</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://cloud.netapp.com" class="n-top-hat__link">云中心</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://community.netapp.com/" class="n-top-hat__link">社区</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://blog.netapp.com/" class="n-top-hat__link">日志</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://customers.netapp.com/en/" class="n-top-hat__link">客户案例</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://www.netapp.com/us/contact-us/index.aspx" target="_self" class="n-top-hat__link" data-ntap-ui="contact-us">联系人</a>
          </li>
        </ul>
      </div>
      <div class="n-top-hat__utils">
        <ul class="n-top-hat__list">
          <li class="n-top-hat__list-item">
            <a href="https://www.netapp.com/us/contact-us/index.aspx" target="_self" class="n-top-hat__link" data-ntap-ui="contact-us">联系人</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
  <!-- End top_hat -->

  <!-- Start property bar -->
  <style>
    .n-property-navigation-bar__menus--desktop-experience .n-menu--mega__default-content__heading span {
    color: #34B0FF;
    }
  </style>
  <div class="n-property-bar " data-ntap-ui="sticky-nav">
    <div class="n-property-bar__inner-wrap">
      <div class="n-property-bar__menu-toggle">
        <a href="#" class="n-property-bar__menu-toggle-link">
          <span class="n-property-bar__menu-toggle-text">Menu</span>
          <svg class="n-icon-bars n-property-bar__menu-toggle-icon" aria-labelledby="title">
            <title>bars</title>
            <use xlink:href="/zh-cn/cloud-manager-setup-admin/common/svg/sprite.svg#bars"></use>
          </svg>
        </a>
      </div>
      <div class="n-property-bar__property-mark ">
        <a href="https://www.netapp.com" class="n-property-bar__property-link">
          <div class="n-property-bar__logo">
            <svg class="n-icon-netapp-mark n-icon-netapp-mark n-property-bar__netapp-mark-icon" aria-labelledby="title">
              <title>netapp-mark</title>
              <use xlink:href="/zh-cn/cloud-manager-setup-admin/common/svg/sprite.svg#netapp-mark"></use>
            </svg>
            <svg class="n-icon-netapp-logo n-property-bar__logo-svg" aria-labelledby="title">
              <title>netapp-logo</title>
              <use xlink:href="/zh-cn/cloud-manager-setup-admin/common/svg/sprite.svg#netapp-logo"></use>
            </svg>
          </div>
        </a>
      </div>

      
      <div class="search-property-bar">
        <div id="search-demo-container" class="searchbox n-property-bar__search">
          <div id="react-search" 
          data-search-html="/zh-cn/cloud-manager-setup-admin/search.html"
          data-type="widget" 
          data-placeholder="搜索文档" 
          data-no-results-found="未找到与 {query} 匹配的结果。" 
          data-did-you-mean="搜索 {suggestion}。" 
          data-no-results-found-did-you-mean="未找到与 {query} 匹配的结果。您是否要搜索 {suggestion}?" 
          data-results-found="找到 {hitCount} 个结果"  
          data-sk-es-pf-indexes=""
          data-flavor=""></div>
          <button class="n-property-bar__search-toggle-button" type="button">
            <svg class="n-icon-search n-property-bar__search-toggle-button-icon" aria-labelledby="title">
              <title>search</title>
              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/zh-cn/cloud-manager-setup-admin/common/svg/sprite.svg#search"></use>
            </svg>
          </button>
        </div>
      </div>
      
    </div>
  </div>
  <div class="n-property-bar__toolbar">
    <!-- Start Language Selector --><div id="ie-i18n" class="n-property-bar__lang-selector">
      <div id="ie-i18n-menu">
      <span class="ie-i18n-lang">简体中文</span>
        <button class="ie-i18n-icon-container" type="button">
          <svg class="n-globe__icon" aria-labelledby="title">
            <title>globe</title>
            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/zh-cn/cloud-manager-setup-admin/common/svg/sprite.svg#globe"></use>
          </svg>
        </button>
      </div>
      <div id="n-property-navigation-bar__menu--language-selector" class="ie-i18n-results-container n-menu n-menu--v3 n-menu--is-active" style="display: none;">
        <div class="n-language-selector-menu">
          <ul class="n-menu__list">
            <li class="n-menu__list-column">
              <ul class="n-menu__list"><li class="n-menu__list-item n-menu__list-item--level-1">
                  <a href="https://docs.netapp.com/zh-cn/cloud-manager-setup-admin/task-adding-azure-accounts.html" class="n-menu__header-text"><span translate="no" class="notranslate">简体中文</span></a>
                </li><li class="n-menu__list-item n-menu__list-item--level-1">
                  <a href="https://docs.netapp.com/us-en/cloud-manager-setup-admin/task-adding-azure-accounts.html" class="n-menu__header-text"><span translate="no" class="notranslate">English</span></a>
                </li><li class="n-menu__list-item n-menu__list-item--level-1">
                  <a href="https://docs.netapp.com/ja-jp/cloud-manager-setup-admin/task-adding-azure-accounts.html" class="n-menu__header-text"><span translate="no" class="notranslate">日本語</span></a>
                </li><li class="n-menu__list-item n-menu__list-item--level-1">
                  <a href="https://docs.netapp.com/ko-kr/cloud-manager-setup-admin/task-adding-azure-accounts.html" class="n-menu__header-text"><span translate="no" class="notranslate">한국어</span></a>
                </li></ul>
            </li>
          </ul>
        </div>
      </div>
    </div><!-- End Language Selector -->

    <div class="n-property-bar__cta"></div>
  </div>
  <script>
    $(function(){
        var currentLocalization = $('html').attr('lang');

        var localizationsDictionary = {
            "en-CA" : "https://www.netapp.com/search/index.aspx?for_cr=canada&",
            "en-IN" : "https://www.netapp.com/search/index.aspx?for_cr=india&",
            "nl-NL" : "https://www.netapp.com/search/index.aspx?for_cr=netherlands&",
            "ru-RU" : "https://www.netapp.com/search/index.aspx?for_cr=russia&",
            "sv-SE" : "https://www.netapp.com/search/index.aspx?for_cr=sweden&",
            "it-IT" : "https://www.netapp.com/search/index.aspx?for_cr=italy&",
            "he-IL" : "https://www.netapp.com/search/index.aspx?for_cr=israel&",
            "ko-KR" : "https://www.netapp.com/search/index.aspx?for_cr=korea&",
            "zh-TW" : "https://www.netapp.com/search/index.aspx?for_cr=taiwan&",
            "en-GB" : "https://www.netapp.com/search/index.aspx?for_cr=unitedkingdom&",
            "en-SG" : "https://www.netapp.com/search/index.aspx?for_cr=asean&",
            "en-AU" : "https://www.netapp.com/search/index.aspx?for_cr=australia&",
            "pt-BR" : "https://www.netapp.com/search/index.aspx?for_cr=brasil&",
            "de-CH" : "https://www.netapp.com/search/index.aspx?for_cr=switzerland&",
            "es-MX" : "https://www.netapp.com/search/index.aspx?for_cr=mexico&"
        };

        if($('html').hasClass('ntap-whitelisted') && localizationsDictionary.hasOwnProperty(currentLocalization)) {
            $('.n-property-bar__property-link').attr('href', '/');
        }
    });
  </script>
  <!-- End property bar -->
</header>


        <main id="n-main-content" class="n-main-content">
          <!-- Start Documentation Content -->
<div class="ie-main">
  <!-- Sidebar Column -->
  
  <div class="col-md-3" id="sidebar-height">
      <div class="n-pdf-header">
  <a id="toggleButtonPdf" class="n-pdf-button" type="button">
    <img src="/zh-cn/cloud-manager-setup-admin/images/pdf.png" width="16" height="16"/>可用的 PDF<span>
    </span>
  </a>
</div>
<div class="n-pdf-body-container">
  <ul id="toggleContainerPdf" class="n-pdf-body" style="display:none;"><li class="pdf-ux-container">
        
        
        
        <a target="_blank" href="/zh-cn/cloud-manager-setup-admin/pdfs/fullsite-sidebar/设置和管理_Cloud_Manager.pdf" >
          <img src="/zh-cn/cloud-manager-setup-admin/images/pdf.png" width="16" height="16"/>此文档站点的 PDF</a>





    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/zh-cn/cloud-manager-setup-admin/pdfs/sidebar/发行说明.pdf" 
            
          >
            <img src="/zh-cn/cloud-manager-setup-admin/images/pdf.png" width="16" height="16"/>
            发行说明
          </a>
          





          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/zh-cn/cloud-manager-setup-admin/pdfs/sidebar/入门.pdf" 
            
          >
            <img src="/zh-cn/cloud-manager-setup-admin/images/pdf.png" width="16" height="16"/>
            入门
          </a>
          









    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/zh-cn/cloud-manager-setup-admin/pdfs/sidebar/设置_NetApp_帐户.pdf" 
            
          >
            <img src="/zh-cn/cloud-manager-setup-admin/images/pdf.png" width="16" height="16"/>
            设置 NetApp 帐户
          </a>
          





          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/zh-cn/cloud-manager-setup-admin/pdfs/sidebar/设置连接器.pdf" 
            
          >
            <img src="/zh-cn/cloud-manager-setup-admin/images/pdf.png" width="16" height="16"/>
            设置连接器
          </a>
          











          
        </li>
      </ul>
    

  





          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/zh-cn/cloud-manager-setup-admin/pdfs/sidebar/管理_Cloud_Manager.pdf" 
            
          >
            <img src="/zh-cn/cloud-manager-setup-admin/images/pdf.png" width="16" height="16"/>
            管理 Cloud Manager
          </a>
          

    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/zh-cn/cloud-manager-setup-admin/pdfs/sidebar/NetApp_帐户.pdf" 
            
          >
            <img src="/zh-cn/cloud-manager-setup-admin/images/pdf.png" width="16" height="16"/>
            NetApp 帐户
          </a>
          







          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/zh-cn/cloud-manager-setup-admin/pdfs/sidebar/连接器.pdf" 
            
          >
            <img src="/zh-cn/cloud-manager-setup-admin/images/pdf.png" width="16" height="16"/>
            连接器
          </a>
          

    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/zh-cn/cloud-manager-setup-admin/pdfs/sidebar/高级部署.pdf" 
            
          >
            <img src="/zh-cn/cloud-manager-setup-admin/images/pdf.png" width="16" height="16"/>
            高级部署
          </a>
          









          
        </li>
      </ul>
    

  













          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/zh-cn/cloud-manager-setup-admin/pdfs/sidebar/AWS_凭据.pdf" 
            
          >
            <img src="/zh-cn/cloud-manager-setup-admin/images/pdf.png" width="16" height="16"/>
            AWS 凭据
          </a>
          





          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/zh-cn/cloud-manager-setup-admin/pdfs/sidebar/Azure_credentials.pdf" 
            
          >
            <img src="/zh-cn/cloud-manager-setup-admin/images/pdf.png" width="16" height="16"/>
            Azure credentials
          </a>
          


    <ul class="subfolders" style="display:none;"><li class="active pdf-hide">
  <a target="_blank" href="/zh-cn/cloud-manager-setup-admin/pdfs/pages/task-adding-azure-accounts.pdf" >
    <img src="/zh-cn/cloud-manager-setup-admin/images/pdf.png" width="16" height="16"/>
    PDF of this page
  </a>
</li>

</ul>
  



          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/zh-cn/cloud-manager-setup-admin/pdfs/sidebar/Google_Cloud_凭据.pdf" 
            
          >
            <img src="/zh-cn/cloud-manager-setup-admin/images/pdf.png" width="16" height="16"/>
            Google Cloud 凭据
          </a>
          





          
        </li>
      </ul>
    

  





          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/zh-cn/cloud-manager-setup-admin/pdfs/sidebar/参考.pdf" 
            
          >
            <img src="/zh-cn/cloud-manager-setup-admin/images/pdf.png" width="16" height="16"/>
            参考
          </a>
          







          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/zh-cn/cloud-manager-setup-admin/pdfs/sidebar/知识和支持.pdf" 
            
          >
            <img src="/zh-cn/cloud-manager-setup-admin/images/pdf.png" width="16" height="16"/>
            知识和支持
          </a>
          





          
        </li>
      </ul>
    

  




</li></ul>
  <div class="zip-pdf-link-container" style="display: none;">   
    <a href="#" id="zipPdf">
      <img src="/zh-cn/cloud-manager-setup-admin/images/pdf-zip.png" width="16" height="16"/>
      <pre>收集单独的 PDF 文档<span class="zip-size"></span></pre>
    </a><div id="zip-link-popup" class="hide">
    <div class="inner-modal">
        <div class="downloading-progress">
            <div class="spinner"></div>
            <h1>Creating your file...</h1>
            <div>This may take a few minutes. Thanks for your patience.</div>
            <button class="cancel-download-btn" type="button">Cancel</button>
        </div>
        <div class="download-complete hide">
            <div class="done-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M20.285 2l-11.285 11.567-5.286-5.011-3.714 3.716 9 8.728 15-15.285z"/></svg>
            </div>
            <div>Your file is ready</div>
            <button class="cancel-download-btn" type="button">OK</button>
        </div>
    </div>
</div>
<script>
    $(".cancel-download-btn").click(function(){
        $("#zip-link-popup").addClass("hide");
        $("#zip-link-popup .downloading-progress").removeClass("hide");
        $("#zip-link-popup .download-complete").addClass("hide");
    });
</script></div>
</div>
<script>
  $("#toggleContainerPdf li.active:last-child").parents('ul.subfolders').toggle('display');
  $("#toggleButtonPdf").click(function () {
    $("#toggleContainerPdf").toggle('display');
    $(".n-pdf-body-container .zip-pdf-link-container").toggle('display');
  });
</script><div class="sidebar-nav-container">
  <ul id="mysidebar" class="nav"><li class=" "><a class="na-navbar-padding" href="https://docs.netapp.com/us-en/cloud-manager-family">
        所有 Cloud Manager 文档
      </a></li><li class=" "><a class="na-navbar-padding" href="/zh-cn/cloud-manager-setup-admin/index.html">
        设置和管理文档
      </a></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> 发行说明</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/zh-cn/cloud-manager-setup-admin/whats-new.html">
        新增功能
      </a></li><li class=" "><a class="na-navbar-padding" href="/zh-cn/cloud-manager-setup-admin/reference-limitations.html">
        限制
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> 入门</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/zh-cn/cloud-manager-setup-admin/concept-overview.html">
        了解 Cloud Manager
      </a></li><li class=" "><a class="na-navbar-padding" href="/zh-cn/cloud-manager-setup-admin/reference-checklist-cm.html">
        入门检查清单
      </a></li><li class=" "><a class="na-navbar-padding" href="/zh-cn/cloud-manager-setup-admin/task-signing-up.html">
        注册到 Cloud Central
      </a></li><li class=" "><a class="na-navbar-padding" href="/zh-cn/cloud-manager-setup-admin/task-logging-in.html">
        登录到 Cloud Manager
      </a></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> 设置 NetApp 帐户</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/zh-cn/cloud-manager-setup-admin/concept-netapp-accounts.html">
        了解 NetApp 客户
      </a></li><li class=" "><a class="na-navbar-padding" href="/zh-cn/cloud-manager-setup-admin/task-setting-up-netapp-accounts.html">
        设置工作空间和用户
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> 设置连接器</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/zh-cn/cloud-manager-setup-admin/concept-connectors.html">
        了解连接器
      </a></li><li class=" "><a class="na-navbar-padding" href="/zh-cn/cloud-manager-setup-admin/reference-networking-cloud-manager.html">
        设置网络
      </a></li><li class=" "><a class="na-navbar-padding" href="/zh-cn/cloud-manager-setup-admin/task-creating-connectors-aws.html">
        在 AWS 中创建连接器
      </a></li><li class=" "><a class="na-navbar-padding" href="/zh-cn/cloud-manager-setup-admin/task-creating-connectors-azure.html">
        在 Azure 中创建连接器
      </a></li><li class=" "><a class="na-navbar-padding" href="/zh-cn/cloud-manager-setup-admin/task-creating-connectors-gcp.html">
        在 Google Cloud 中创建 Connector
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/zh-cn/cloud-manager-setup-admin/reference-whats-next.html">
        下一步行动
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> 管理 Cloud Manager</div>
      </a>
      <ul><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> NetApp 帐户</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/zh-cn/cloud-manager-setup-admin/task-managing-netapp-accounts.html">
        管理您的帐户
      </a></li><li class=" "><a class="na-navbar-padding" href="/zh-cn/cloud-manager-setup-admin/task-monitor-cm-operations.html">
        监控帐户中的操作
      </a></li><li class=" "><a class="na-navbar-padding" href="/zh-cn/cloud-manager-setup-admin/reference-user-roles.html">
        用户角色
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> 连接器</div>
      </a>
      <ul><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> 高级部署</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/zh-cn/cloud-manager-setup-admin/task-launching-aws-mktp.html">
        从 AWS Marketplace 创建
      </a></li><li class=" "><a class="na-navbar-padding" href="/zh-cn/cloud-manager-setup-admin/task-launching-azure-mktp.html">
        从 Azure Marketplace 创建
      </a></li><li class=" "><a class="na-navbar-padding" href="/zh-cn/cloud-manager-setup-admin/task-installing-linux.html">
        通过 Internet 在您自己的主机上安装
      </a></li><li class=" "><a class="na-navbar-padding" href="/zh-cn/cloud-manager-setup-admin/task-install-connector-onprem-no-internet.html">
        在不使用 Internet 的情况下在内部安装
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/zh-cn/cloud-manager-setup-admin/task-finding-system-id.html">
        查找 Connector 的系统 ID
      </a></li><li class=" "><a class="na-navbar-padding" href="/zh-cn/cloud-manager-setup-admin/task-managing-connectors.html">
        管理现有连接器
      </a></li><li class=" "><a class="na-navbar-padding" href="/zh-cn/cloud-manager-setup-admin/task-installing-https-cert.html">
        安装 HTTPS 证书
      </a></li><li class=" "><a class="na-navbar-padding" href="/zh-cn/cloud-manager-setup-admin/task-configuring-proxy.html">
        配置代理设置
      </a></li><li class=" "><a class="na-navbar-padding" href="/zh-cn/cloud-manager-setup-admin/reference-connector-default-config.html">
        默认配置
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> AWS 凭据</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/zh-cn/cloud-manager-setup-admin/concept-accounts-aws.html">
        概述
      </a></li><li class=" "><a class="na-navbar-padding" href="/zh-cn/cloud-manager-setup-admin/task-adding-aws-accounts.html">
        管理凭据和订阅
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Azure credentials</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/zh-cn/cloud-manager-setup-admin/concept-accounts-azure.html">
        概述
      </a></li><li class="  active "><a class="na-navbar-padding" href="/zh-cn/cloud-manager-setup-admin/task-adding-azure-accounts.html">
        管理凭据和订阅
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Google Cloud 凭据</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/zh-cn/cloud-manager-setup-admin/concept-accounts-gcp.html">
        概述
      </a></li><li class=" "><a class="na-navbar-padding" href="/zh-cn/cloud-manager-setup-admin/task-adding-gcp-accounts.html">
        管理凭据和订阅
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/zh-cn/cloud-manager-setup-admin/task-adding-nss-accounts.html">
        NetApp 支持站点帐户
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> 参考</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/zh-cn/cloud-manager-setup-admin/reference-permissions-aws.html">
        Connector 的 AWS 权限
      </a></li><li class=" "><a class="na-navbar-padding" href="/zh-cn/cloud-manager-setup-admin/reference-permissions-azure.html">
        Connector 的 Azure 权限
      </a></li><li class=" "><a class="na-navbar-padding" href="/zh-cn/cloud-manager-setup-admin/reference-permissions-gcp.html">
        适用于 Connector 的 Google Cloud 权限
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> 知识和支持</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/zh-cn/cloud-manager-setup-admin/task-support-registration.html">
        注册以获得支持
      </a></li><li class=" "><a class="na-navbar-padding" href="/zh-cn/cloud-manager-setup-admin/task-get-help.html">
        获取帮助
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/zh-cn/cloud-manager-setup-admin/legal-notices.html">
        法律声明
      </a></li></ul>
</div>
<script>
  window.onscroll = () => {
    const value = -40 - (document.body.scrollHeight - (window.innerHeight + document.scrollingElement.scrollTop));
    
    document.getElementById("sidebar-height").style.bottom = Math.max(0,value) + "px";
};
</script>
<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>


  </div>
  

  <div class="ie-content-pane n-doc__component-detail-content n-doc__component-detail-content--show-code">
    <!-- Begin of page container --><article class="page-content">
      <div class="ie-utility">
  <div class="ie-menu">
    <div class="n-breadcrumb">
      <ul class="n-breadcrumb__list">
        <li class="n-breadcrumb__list-item">
          <a href="https://docs.netapp.com">docs.netapp.com</a>
        </li>
        
        <li class="n-breadcrumb__list-item">
          <a href="https://docs.netapp.com/us-en/cloud/">云文档</a>
        </li>
        

        

        <li class="n-breadcrumb__list-item">
          <a href="/zh-cn/cloud-manager-setup-admin/">Set&nbsp;up&nbsp;and&nbsp;administration</a>
        </li>

      </ul>
    </div>
    <div style="clear: both"></div><!-- Main needs to have height -->
  </div>
</div>

      <div class="ie-nmt-disclaimer">
  <span>
    <div class="ie-nmt-disclaimer-container">
      <div class="ie-nmt-disclaimer-icon">
        <svg class="luci-icon" aria-hidden="true">
          <use xlink:href="/zh-cn/cloud-manager-setup-admin/common/svg/sprite.svg#circle-info">
        </svg>
      </div>
      <div class="ie-nmt-disclaimer-content">
        <span> 简体中文版经机器翻译而成，仅供参考。如与英语版出现任何冲突，应以英语版为准。 </span>
      </div>
      <div style="clear:both;"></div>
    </div>
  </span>
</div><div class="n-doc__component-detail-heading-wrap">
  <h1 class="n-doc__component-detail-heading">管理 Cloud Manager 的 Azure 凭据和订阅</h1>
</div>


<p class="page-details">
  
    
    <time datetime="2022-04-01 19:05:55 +0000">04/01/2022</time>
    
  


</p>

<div id="preamble">
<div class="sectionbody">
<div class="paragraph lead">
<p>创建 Cloud Volumes ONTAP 系统时，您需要选择要用于该系统的 Azure 凭据。如果您使用的是按需购买许可，则还需要选择 Marketplace 订阅。如果您需要使用多个 Azure 凭据或多个适用于 Cloud Volumes ONTAP 的 Azure Marketplace 订阅，请按照此页面上的步骤进行操作。</p>
</div>
<div class="paragraph">
<p>可以通过两种方式在 Cloud Manager 中添加其他 Azure 订阅和凭据。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>将其他 Azure 订阅与 Azure 托管身份关联。</p>
</li>
<li>
<p>如果要使用不同的 Azure 凭据部署 Cloud Volumes ONTAP ，请使用服务主体授予 Azure 权限，并将其凭据添加到 Cloud Manager 。</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="将其他-azure-订阅与受管身份关联">将其他 Azure 订阅与受管身份关联</h2>
<div class="sectionbody">
<div class="paragraph">
<p>通过 Cloud Manager ，您可以选择要在其中部署 Cloud Volumes ONTAP 的 Azure 凭据和 Azure 订阅。除非关联，否则您无法为托管身份配置文件选择其他 Azure 订阅 <a href="https://docs.microsoft.com/en-us/azure/active-directory/managed-identities-azure-resources/overview" target="_blank" rel="noopener">"托管身份"</a> 这些订阅。</p>
</div>
<div class="paragraph">
<p>托管身份为 <a href="concept-accounts-azure.html">"初始 Azure 帐户"</a> 从 Cloud Manager 部署 Connector 时。部署 Connector 时， Cloud Manager 会创建 Cloud Manager 操作员角色并将其分配给 Connector 虚拟机。</p>
</div>
<div class="olist arabic">
<div class="title">步骤</div>
<ol class="arabic">
<li>
<p>登录 Azure 门户。</p>
</li>
<li>
<p>打开 * 订阅 * 服务，然后选择要部署 Cloud Volumes ONTAP 的订阅。</p>
</li>
<li>
<p>单击 * 访问控制（ IAM ） * 。</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>单击 * 添加 * &gt; * 添加角色分配 * ，然后添加权限：</p>
<div class="ulist">
<ul>
<li>
<p>选择 * Cloud Manager Operator* 角色。</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/cloud-manager-setup-admin/images/note.svg" alt="注">
</td>
<td class="content">
Cloud Manager Operator 是中提供的默认名称 <a href="https://mysupport.netapp.com/site/info/cloud-manager-policies">"Cloud Manager 策略"</a>。如果您为角色选择了其他名称，请选择该名称。
</td>
</tr>
</table>
</div>
</li>
<li>
<p>分配对 * 虚拟机 * 的访问权限。</p>
</li>
<li>
<p>选择创建 Connector 虚拟机的订阅。</p>
</li>
<li>
<p>选择 Connector 虚拟机。</p>
</li>
<li>
<p>单击 * 保存 * 。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>对其他订阅重复这些步骤。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>创建新的工作环境时，您现在应该能够为托管身份配置文件从多个 Azure 订阅中进行选择。</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="./media/screenshot_accounts_switch_azure_subscription.gif" alt="屏幕截图显示了在选择 Microsoft Azure Provider 帐户时可以选择多个 Azure 订阅的功能。"></span></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="向-cloud-manager-添加其他-azure-凭据">向 Cloud Manager 添加其他 Azure 凭据</h2>
<div class="sectionbody">
<div class="paragraph">
<p>从 Cloud Manager 部署 Connector 时， Cloud Manager 会在具有所需权限的虚拟机上启用系统分配的托管身份。在为 Cloud Volumes ONTAP 创建新工作环境时， Cloud Manager 会默认选择以下 Azure 凭据：</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<img src="/us-en/cloud-manager-setup-admin/images/tip.svg" alt="提示">
</td>
<td class="content">
如果在现有系统上手动安装 Connector 软件，则不会添加一组初始凭据。 <a href="concept-accounts-azure.html">"了解 Azure 凭据和权限"</a>。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>如果您要使用 <em>Different</em> Azure 凭据部署 Cloud Volumes ONTAP ，则必须通过在 Azure Active Directory 中为每个 Azure 帐户创建和设置服务主体来授予所需权限。然后，您可以将新凭据添加到 Cloud Manager 。</p>
</div>
<div class="sect2">
<h3 id="使用服务主体授予-azure-权限">使用服务主体授予 Azure 权限</h3>
<div class="paragraph">
<p>Cloud Manager 需要权限才能在 Azure 中执行操作。您可以通过在 Azure Active Directory 中创建和设置服务主体以及获取 Cloud Manager 所需的 Azure 凭据来为 Azure 帐户授予所需权限。</p>
</div>
<div class="paragraph">
<p>下图描述了 Cloud Manager 如何获得在 Azure 中执行操作的权限。与一个或多个 Azure 订阅绑定的服务主体对象表示 Azure Active Directory 中的 Cloud Manager 并分配给允许所需权限的自定义角色。</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="./media/diagram_azure_authentication.png" alt="概念映像，显示云管理器在进行 API 调用之前从 Azure Active Directory 获取身份验证和授权。在 Active Directory 中， Cloud Manager 操作员角色定义权限。它与一个或多个 Azure 订阅以及一个表示 Cloud Manger 应用程序的服务主体对象相关联。"></span></p>
</div>
<div class="olist arabic">
<div class="title">步骤</div>
<ol class="arabic">
<li>
<p><a href="#Creating an Azure Active Directory application">创建 Azure Active Directory 应用程序</a>。</p>
</li>
<li>
<p><a href="#Assigning the application to a role">将应用程序分配给角色</a>。</p>
</li>
<li>
<p><a href="#Adding Windows Azure Service Management API permissions">添加 Windows Azure 服务管理 API 权限</a>。</p>
</li>
<li>
<p><a href="#Getting the application ID and directory ID">获取应用程序 ID 和目录 ID</a>。</p>
</li>
<li>
<p><a href="#Creating a client secret">创建客户端密钥</a>。</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="创建-azure-active-directory-应用程序">创建 Azure Active Directory 应用程序</h4>
<div class="paragraph">
<p>创建一个 Azure Active Directory （ AD ）应用程序和服务主体， Cloud Manager 可使用该应用程序和服务主体进行基于角色的访问控制。</p>
</div>
<div class="paragraph">
<p>要创建 Active Directory 应用程序并将此应用程序分配给角色，您必须在 Azure 中拥有适当的权限。有关详细信息，请参见 <a href="https://docs.microsoft.com/en-us/azure/active-directory/develop/howto-create-service-principal-portal#required-permissions/" target="_blank" rel="noopener">"Microsoft Azure 文档：所需权限"</a>。</p>
</div>
<div class="olist arabic">
<div class="title">步骤</div>
<ol class="arabic">
<li>
<p>从 Azure 门户中，打开 * Azure Active Directory* 服务。</p>
<div class="paragraph">
<p><span class="image"><img src="./media/screenshot_azure_ad.gif" alt="显示了 Microsoft Azure 中的 Active Directory 服务。"></span></p>
</div>
</li>
<li>
<p>在菜单中，单击 * 应用程序注册 * 。</p>
</li>
<li>
<p>单击 * 新建注册 * 。</p>
</li>
<li>
<p>指定有关应用程序的详细信息：</p>
<div class="ulist">
<ul>
<li>
<p>* 名称 * ：输入应用程序的名称。</p>
</li>
<li>
<p>* 帐户类型 * ：选择帐户类型（任何将适用于 Cloud Manager ）。</p>
</li>
<li>
<p>* 重定向 URI* ：可以将此字段留空。</p>
</li>
</ul>
</div>
</li>
<li>
<p>单击 * 注册 * 。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>您已创建 AD 应用程序和服务主体。</p>
</div>
</div>
<div class="sect3">
<h4 id="将应用程序分配给角色">将应用程序分配给角色</h4>
<div class="paragraph">
<p>您必须将服务主体绑定到一个或多个 OnCommand 订阅，并为其分配自定义 "Cloud Manager 操作员 " 角色，以便 管理器在 Azure 中具有权限。</p>
</div>
<div class="olist arabic">
<div class="title">步骤</div>
<ol class="arabic">
<li>
<p>下载 <a href="https://mysupport.netapp.com/site/info/cloud-manager-policies" target="_blank" rel="noopener">"Cloud Manager Azure 策略"</a>。</p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<img src="/us-en/cloud-manager-setup-admin/images/tip.svg" alt="提示">
</td>
<td class="content">
右键单击链接并单击 * 将链接另存为 &#8230;&#8203;* 以下载此文件。
</td>
</tr>
</table>
</div>
</li>
<li>
<p>通过将 Azure 订阅 ID 添加到可分配范围来修改 JSON 文件。</p>
<div class="paragraph">
<p>您应该为每个 Azure 订阅添加 ID 、用户将从中创建 Cloud Volumes ONTAP 系统。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>示例 *</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">"AssignableScopes": [
"/subscriptions/d333af45-0d07-4154-943d-c25fbzzzzzzz",
"/subscriptions/54b91999-b3e6-4599-908e-416e0zzzzzzz",
"/subscriptions/398e471c-3b42-4ae7-9b59-ce5bbzzzzzzz"</code></pre>
</div>
</div>
</li>
<li>
<p>使用 JSON 文件在 Azure 中创建自定义角色。</p>
<div class="paragraph">
<p>以下步骤介绍如何在 Azure Cloud Shell 中使用 Bash 创建角色。</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>start <a href="https://docs.microsoft.com/en-us/azure/cloud-shell/overview" target="_blank" rel="noopener">"Azure Cloud Shell"</a> 并选择 Bash 环境。</p>
</li>
<li>
<p>上传 JSON 文件。</p>
<div class="paragraph">
<p><span class="image"><img src="./media/screenshot_azure_shell_upload.png" alt="Azure Cloud Shell 的屏幕截图，您可以在其中选择上传文件的选项。"></span></p>
</div>
</li>
<li>
<p>输入以下 Azure 命令行界面命令：</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-azurecli" data-lang="azurecli">az role definition create --role-definition Policy_for_cloud_Manager_Azure_3.9.8.json</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>现在，您应具有一个名为 <em>Cloud Manager Operator</em> 的自定义角色。</p>
</div>
</li>
<li>
<p>将应用程序分配给角色：</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>从 Azure 门户中，打开 * 订阅 * 服务。</p>
</li>
<li>
<p>选择订阅。</p>
</li>
<li>
<p>单击 * 访问控制（ IAM ） &gt; 添加 &gt; 添加角色分配 * 。</p>
</li>
<li>
<p>在 * 角色 * 选项卡中，选择 * Cloud Manager 操作员 * 角色，然后单击 * 下一步 * 。</p>
</li>
<li>
<p>在 * 成员 * 选项卡中，完成以下步骤：</p>
<div class="ulist">
<ul>
<li>
<p>保持选中 * 用户，组或服务主体 * 。</p>
</li>
<li>
<p>单击 * 选择成员 * 。</p>
<div class="paragraph">
<p><span class="image"><img src="./media/screenshot-azure-service-principal-role.png" alt="Azure 门户的屏幕截图，显示向应用程序添加角色时的成员选项卡。"></span></p>
</div>
</li>
<li>
<p>搜索应用程序的名称。</p>
<div class="paragraph">
<p>以下是一个示例：</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="image"><img src="./media/screenshot_azure_service_principal_role.png" alt="Azure 门户的屏幕截图，其中显示了 Azure 门户中的添加角色分配表。"></span></p>
</div>
<div class="ulist">
<ul>
<li>
<p>选择应用程序并单击 * 选择 * 。</p>
</li>
<li>
<p>单击 * 下一步 * 。</p>
</li>
</ul>
</div>
</li>
<li>
<p>单击 * 审核 + 分配 * 。</p>
<div class="paragraph">
<p>现在，服务主体具有部署 Connector 所需的 Azure 权限。</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>如果要从多个 Azure 订阅部署 Cloud Volumes ONTAP ，则必须将服务主体绑定到每个订阅。使用 Cloud Manager ，您可以选择部署 Cloud Volumes ONTAP 时要使用的订阅。</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="添加-windows-azure-服务管理-api-权限">添加 Windows Azure 服务管理 API 权限</h4>
<div class="paragraph">
<p>服务主体必须具有 "Windows Azure 服务管理 API" 权限。</p>
</div>
<div class="olist arabic">
<div class="title">步骤</div>
<ol class="arabic">
<li>
<p>在 * Azure Active Directory* 服务中，单击 * 应用程序注册 * 并选择应用程序。</p>
</li>
<li>
<p>单击 * API 权限 &gt; 添加权限 * 。</p>
</li>
<li>
<p>在 * Microsoft APIs* 下，选择 * Azure Service Management* 。</p>
<div class="paragraph">
<p><span class="image"><img src="./media/screenshot_azure_service_mgmt_apis.gif" alt="Azure 门户的屏幕截图，其中显示了 Azure 服务管理 API 权限。"></span></p>
</div>
</li>
<li>
<p>单击 * 以组织用户身份访问 Azure 服务管理 * ，然后单击 * 添加权限 * 。</p>
<div class="paragraph">
<p><span class="image"><img src="./media/screenshot_azure_service_mgmt_apis_add.gif" alt="Azure 门户的屏幕截图，显示如何添加 Azure 服务管理 API 。"></span></p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="获取应用程序-id-和目录-id">获取应用程序 ID 和目录 ID</h4>
<div class="paragraph">
<p>将 Azure 帐户添加到 Cloud Manager 时，您需要提供应用程序（客户端） ID 和目录（租户） ID 。Cloud Manager 使用 ID 以编程方式登录。</p>
</div>
<div class="olist arabic">
<div class="title">步骤</div>
<ol class="arabic">
<li>
<p>在 * Azure Active Directory* 服务中，单击 * 应用程序注册 * 并选择应用程序。</p>
</li>
<li>
<p>复制 * 应用程序（客户端） ID* 和 * 目录（租户） ID* 。</p>
<div class="paragraph">
<p><span class="image"><img src="./media/screenshot_azure_app_ids.gif" alt="显示 Azure Active Directory 中某个应用程序的应用程序（客户端） ID 和目录（租户） ID 的屏幕截图。"></span></p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="创建客户端密钥">创建客户端密钥</h4>
<div class="paragraph">
<p>您需要创建客户端密钥，然后向 Cloud Manager 提供该密钥的值，以便 Cloud Manager 可以使用它向 Azure AD 进行身份验证。</p>
</div>
<div class="olist arabic">
<div class="title">步骤</div>
<ol class="arabic">
<li>
<p>打开 * Azure Active Directory* 服务。</p>
</li>
<li>
<p>单击 * 应用程序注册 * 并选择您的应用程序。</p>
</li>
<li>
<p>单击 * 证书和密码 &gt; 新客户端密钥 * 。</p>
</li>
<li>
<p>提供密钥和持续时间的问题描述。</p>
</li>
<li>
<p>单击 * 添加 * 。</p>
</li>
<li>
<p>复制客户端密钥的值。</p>
<div class="paragraph">
<p><span class="image"><img src="./media/screenshot_azure_client_secret.gif" alt="Azure 门户的屏幕截图，其中显示了 Azure AD 服务主体的客户端密钥。"></span></p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>此时，您的服务主体已设置完毕，您应已复制应用程序（客户端） ID ，目录（租户） ID 和客户端密钥值。添加 Azure 帐户时，您需要在 Cloud Manager 中输入此信息。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="将凭据添加到-cloud-manager">将凭据添加到 Cloud Manager</h3>
<div class="paragraph">
<p>在为 Azure 帐户提供所需权限后，您可以将该帐户的凭据添加到 Cloud Manager 中。完成此步骤后，您可以使用不同的 Azure 凭据启动 Cloud Volumes ONTAP 。</p>
</div>
<div class="paragraph">
<p>如果您刚刚在云提供商中创建了这些凭据，则可能需要几分钟的时间才能使用这些凭据。请等待几分钟，然后再将凭据添加到 Cloud Manager 。</p>
</div>
<div class="paragraph">
<p>您需要先创建 Connector ，然后才能更改 Cloud Manager 设置。 <a href="concept-connectors.html#how-to-create-a-connector">"了解如何操作"</a>。</p>
</div>
<div class="olist arabic">
<div class="title">步骤</div>
<ol class="arabic">
<li>
<p>在 Cloud Manager 控制台的右上角，单击设置图标，然后选择 * 凭据 * 。</p>
<div class="paragraph">
<p><span class="image"><img src="./media/screenshot_settings_icon.gif" alt="一个屏幕截图，显示 Cloud Manager 控制台右上角的设置图标。"></span></p>
</div>
</li>
<li>
<p>单击 * 添加凭据 * ，然后按照向导中的步骤进行操作。</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>* 凭据位置 * ：选择 * Microsoft Azure &gt; Connector* 。</p>
</li>
<li>
<p>* 定义凭据 * ：输入有关授予所需权限的 Azure Active Directory 服务主体的信息：</p>
<div class="ulist">
<ul>
<li>
<p>应用程序（客户端） ID ：请参见 <a href="#Getting the application ID and directory ID">[Getting the application ID and directory ID]</a>。</p>
</li>
<li>
<p>目录（租户） ID ：请参见 <a href="#Getting the application ID and directory ID">[Getting the application ID and directory ID]</a>。</p>
</li>
<li>
<p>客户端密钥：请参见 <a href="#Creating a client secret">[Creating a client secret]</a>。</p>
</li>
</ul>
</div>
</li>
<li>
<p>* 市场订阅 * ：通过立即订阅或选择现有订阅，将市场订阅与这些凭据相关联。</p>
<div class="paragraph">
<p>要按每小时费率（ PAYGO ）购买 Cloud Volumes ONTAP ，这些 Azure 凭据必须与 Azure Marketplace 中的订阅相关联。</p>
</div>
</li>
<li>
<p>* 查看 * ：确认有关新凭据的详细信息，然后单击 * 添加 * 。</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>现在，您可以从 " 详细信息和凭据 " 页面切换到不同的凭据集 <a href="https://docs.netapp.com/us-en/cloud-manager-cloud-volumes-ontap/task-deploying-otc-azure.html" target="_blank" rel="noopener">"创建新的工作环境时"</a></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="./media/screenshot_accounts_switch_azure.gif" alt="一个屏幕截图，显示在单击 Details &amp;amp ； Credentials 页面中的 Edit Credentials 后在凭据之间进行选择的情况。"></span></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="管理现有凭据">管理现有凭据</h2>
<div class="sectionbody">
<div class="paragraph">
<p>通过关联 Marketplace 订阅，编辑凭据并将其删除，管理已添加到 Cloud Manager 的 Azure 凭据。</p>
</div>
<div class="sect2">
<h3 id="将-azure-marketplace-订阅与凭据关联">将 Azure Marketplace 订阅与凭据关联</h3>
<div class="paragraph">
<p>将 Azure 凭据添加到 Cloud Manager 后，您可以将 Azure Marketplace 订阅与这些凭据相关联。通过订阅，您可以创建按需购买的 Cloud Volumes ONTAP 系统并使用其他 NetApp 云服务。</p>
</div>
<div class="paragraph">
<p>在以下两种情况下，您可能会在将凭据添加到 Cloud Manager 后关联 Azure Marketplace 订阅：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>最初将凭据添加到 Cloud Manager 时，您未关联订阅。</p>
</li>
<li>
<p>您希望将现有 Azure Marketplace 订阅替换为新订阅。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>您需要先创建 Connector ，然后才能更改 Cloud Manager 设置。 <a href="concept-connectors.html#how-to-create-a-connector">"了解如何操作"</a>。</p>
</div>
<div class="olist arabic">
<div class="title">步骤</div>
<ol class="arabic">
<li>
<p>在 Cloud Manager 控制台的右上角，单击设置图标，然后选择 * 凭据 * 。</p>
</li>
<li>
<p>单击一组凭据的操作菜单，然后选择 * 关联订阅 * 。</p>
<div class="paragraph">
<p><span class="image"><img src="./media/screenshot_azure_add_subscription.png" alt="一组现有凭据的操作菜单屏幕截图。"></span></p>
</div>
</li>
<li>
<p>从下拉列表中选择订阅或单击 * 添加订阅 * ，然后按照步骤创建新订阅。</p>
<div class="paragraph">
<p>以下视频从工作环境向导的上下文中启动，但在您单击 * 添加订阅 * 后显示相同的工作流：</p>
</div>
<div class="videoblock">
<div class="content">
<video src="./media/video_subscribing_azure.mp4" width="848" height="480" controls>
Your browser does not support the video tag.
</video>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="编辑凭据">编辑凭据</h3>
<div class="paragraph">
<p>通过修改 Azure 服务凭据的详细信息，在 Cloud Manager 中编辑 Azure 凭据。例如，如果为服务主体应用程序创建了新密钥，则可能需要更新客户端密钥。</p>
</div>
<div class="olist arabic">
<div class="title">步骤</div>
<ol class="arabic">
<li>
<p>在 Cloud Manager 控制台的右上角，单击设置图标，然后选择 * 凭据 * 。</p>
</li>
<li>
<p>单击一组凭据的操作菜单，然后选择 * 编辑凭据 * 。</p>
</li>
<li>
<p>进行所需的更改，然后单击 * 应用 * 。</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="正在删除凭据">正在删除凭据</h3>
<div class="paragraph">
<p>如果您不再需要一组凭据，可以从 Cloud Manager 中删除这些凭据。您只能删除与工作环境无关的凭据。</p>
</div>
<div class="olist arabic">
<div class="title">步骤</div>
<ol class="arabic">
<li>
<p>在 Cloud Manager 控制台的右上角，单击设置图标，然后选择 * 凭据 * 。</p>
</li>
<li>
<p>单击一组凭据的操作菜单，然后选择 * 删除凭据 * 。</p>
</li>
<li>
<p>单击 * 删除 * 进行确认。</p>
</li>
</ol>
</div>
</div>
</div>
</div>

    </article>
    <!-- Page Container -->
  </div>

  <div style="clear: both"></div><!-- Main needs to have height --></div>

        </main>

        <footer class="n-footer">
  <div class="n-footer__bottom">
    <div class="n-container">
      <div class="n-footer__bottom-left">
        <div class="n-footer__copyright">
          <ul class="n-footer__copyright-list">
            <li class="n-footer__copyright-link">
              <a href="https://www.netapp.com/us/legal/copyright.aspx">© 2022 NetApp, Inc.</a>
            </li>
            <li class="n-footer__copyright-link">
              <a href="https://www.netapp.com/company/legal/terms-of-use/">条款和条件</a>
            </li>
            <li class="n-footer__copyright-link">
              <a href="https://www.netapp.com/company/legal/privacy-policy/">隐私政策</a>
            </li>
            <li class="n-footer__copyright-link">
              <a href="https://www.netapp.com/company/legal/cookie-policy/">Cookie 政策</a>
            </li>
            <li class="n-footer__copyright-link">
              <a class="ot-sdk-show-settings">Cookie 设置</a>
            </li>
          </ul>
        </div>
      </div>
      <div class="n-footer__bottom-right">
        <div class="n-footer__copyright">
          <ul class="n-footer__copyright-list">
            <li class="n-footer__copyright-link">
              <span class="n-footer__fine-print">想就我们的网站提供反馈?</span>
              <a target="_self" href="javascript:netapp_mailto()">请告诉我们</a>
            </li>
            <li class="n-footer__copyright-link">
              <a href="https://docs.netapp.com/zh-cn/announcements/">通知</a>
            </li>
          </ul>
        </div>
        <div class="n-footer__social-links">
          <ul class="n-footer__social-link-list">
            <li class="n-footer__social-link-list-item">
              <a class="n-footer__social-link" data-ntap-social="follow-blog" href="https://blog.netapp.com"
                target="_blank" title="blog" alt="blog">
                <span class="n-footer__social-link-text">blog</span>
                <svg class="n-icon-blog n-footer__social-link-icon" aria-labelledby="title">
                  <title>blog@</title>
                  <use xmlns:xlink="http://www.w3.org/1999/xlink"
                    xlink:href="/zh-cn/cloud-manager-setup-admin/common/svg/sprite.svg#blog"></use>
                </svg>
              </a>
            </li>
            <li class="n-footer__social-link-list-item">
              <a class="n-footer__social-link" data-ntap-social="follow-community" href="https://community.netapp.com/"
                target="_blank" title="community" alt="community">
                <span class="n-footer__social-link-text">community</span>
                <svg class="n-icon-community n-footer__social-link-icon" aria-labelledby="title">
                  <title>community@</title>
                  <use xmlns:xlink="http://www.w3.org/1999/xlink"
                    xlink:href="/zh-cn/cloud-manager-setup-admin/common/svg/sprite.svg#comments"></use>
                </svg>
              </a>
            </li>
            <li class="n-footer__social-link-list-item">
              <a class="n-footer__social-link" data-ntap-social="follow-twitter" href="https://twitter.com/netapp"
                target="_blank" title="twitter" alt="twitter">
                <span class="n-footer__social-link-text">twitter</span>
                <svg class="n-icon-twitter n-footer__social-link-icon" aria-labelledby="title">
                  <title>twitter@</title>
                  <use xmlns:xlink="http://www.w3.org/1999/xlink"
                    xlink:href="/zh-cn/cloud-manager-setup-admin/common/svg/sprite.svg#twitter"></use>
                </svg>
              </a>
            </li>
            <li class="n-footer__social-link-list-item">
              <a class="n-footer__social-link" data-ntap-social="follow-facebook" href="https://www.facebook.com/NetApp"
                target="_blank" title="facebook" alt="facebook">
                <span class="n-footer__social-link-text">facebook</span>
                <svg class="n-icon-facebook n-footer__social-link-icon" aria-labelledby="title">
                  <title>facebook@</title>
                  <use xmlns:xlink="http://www.w3.org/1999/xlink"
                    xlink:href="/zh-cn/cloud-manager-setup-admin/common/svg/sprite.svg#facebook"></use>
                </svg>
              </a>
            </li>
            <li class="n-footer__social-link-list-item">
              <a class="n-footer__social-link" data-ntap-social="follow-linkedin"
                href="https://www.linkedin.com/company/netapp" target="_blank" title="linkedin" alt="linkedin">
                <span class="n-footer__social-link-text">linkedin</span>
                <svg class="n-icon-linkedin n-footer__social-link-icon" aria-labelledby="title">
                  <title>linkedin@</title>
                  <use xmlns:xlink="http://www.w3.org/1999/xlink"
                    xlink:href="/zh-cn/cloud-manager-setup-admin/common/svg/sprite.svg#linkedin"></use>
                </svg>
              </a>
            </li>
            <li class="n-footer__social-link-list-item">
              <a class="n-footer__social-link" data-ntap-social="follow-youtube"
                href="https://www.youtube.com/user/NetAppTV" target="_blank" title="youtube" alt="youtube">
                <span class="n-footer__social-link-text">youtube</span>
                <svg class="n-icon-youtube n-footer__social-link-icon" aria-labelledby="title">
                  <title>youtube@</title>
                  <use xmlns:xlink="http://www.w3.org/1999/xlink"
                    xlink:href="/zh-cn/cloud-manager-setup-admin/common/svg/sprite.svg#youtube"></use>
                </svg>
              </a>
            </li>
            <li class="n-footer__social-link-list-item">
              <a class="n-footer__social-link" data-ntap-social="follow-slideshare"
                href="https://www.slideshare.net/NetApp" target="_blank" title="slideshare" alt="slideshare">
                <span class="n-footer__social-link-text">slideshare</span>
                <svg class="n-icon-slideshare n-footer__social-link-icon" aria-labelledby="title">
                  <title>slideshare@</title>
                  <use xmlns:xlink="http://www.w3.org/1999/xlink"
                    xlink:href="/zh-cn/cloud-manager-setup-admin/common/svg/sprite.svg#slideshare"></use>
                </svg>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</footer>

      </div><!-- Elasticsearch JS -->
      <script type="text/javascript" src='/zh-cn/cloud-manager-setup-admin/js/bundle.js'></script>

      <!-- Syntax Highlighting -->
      <script type="text/javascript" src='/zh-cn/cloud-manager-setup-admin/js/prism.js'></script>
      <script type="text/javascript" src='/zh-cn/cloud-manager-setup-admin/js/prism-curl.js'></script>
    </div>
    <script>
      document.body.offsetWidth=1903;
      cookieLaw = {}
      cookieLaw.euCountry = "US";
      cookieLaw.invoke = function(){return false;}
    </script>
    <script src='/zh-cn/cloud-manager-setup-admin/js/www-ntap.js'></script>
    <script src='/zh-cn/cloud-manager-setup-admin/js/tabbed-blocks.js'></script>
  </body></html>
